var W=Object.defineProperty;var q=(r,e,s)=>e in r?W(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var C=(r,e,s)=>(q(r,typeof e!="symbol"?e+"":e,s),s),P=(r,e,s)=>{if(!e.has(r))throw TypeError("Cannot "+s)};var t=(r,e,s)=>(P(r,e,"read from private field"),s?s.call(r):e.get(r)),l=(r,e,s)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,s)},d=(r,e,s,a)=>(P(r,e,"write to private field"),a?a.call(r,s):e.set(r,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const b of o.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&a(b)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();const c=r=>document.querySelectorAll(r);var w=(r=>(r[r.play=0]="play",r[r.arrange=1]="arrange",r))(w||{}),n=(r=>(r.blue="blue",r.red="red",r))(n||{});const R=""+new URL("../images/red-tank.svg",import.meta.url).href,D=""+new URL("../images/blue-tank.svg",import.meta.url).href,U=""+new URL("../images/dead.svg",import.meta.url).href;var E,u,p;class S{constructor(e=""){l(this,E,!1);l(this,u,new Image);l(this,p,void 0);C(this,"destroy",()=>{t(this,u).src=U,d(this,E,!0)});d(this,p,e),t(this,u).classList.add("tank"),t(this,p)==="red"&&(t(this,u).src=R),t(this,p)==="blue"&&(t(this,u).src=D)}get position(){var e;return(e=t(this,u).parentElement)==null?void 0:e.getAttribute("data-address")}get isDead(){return t(this,E)}get cell(){return t(this,u)}get color(){return t(this,p)}}E=new WeakMap,u=new WeakMap,p=new WeakMap;var k,G,h,$;class A{constructor(e,s="Ù¾ÛŒØ§Ù… ØªØ³Øª",a=3e3){l(this,k,void 0);l(this,G,void 0);l(this,h,void 0);l(this,$,void 0);d(this,k,a),d(this,G,s),d(this,h,document.createElement("DIV")),t(this,h).classList.add("toast"),d(this,$,e),t(this,h).innerText=t(this,G),t(this,h).classList.add(t(this,$))}show(){document.body.append(t(this,h)),t(this,h).classList.add("show"),setTimeout(()=>t(this,h).remove(),t(this,k))}}k=new WeakMap,G=new WeakMap,h=new WeakMap,$=new WeakMap;var m,y,g,L,T,f,v;class z{constructor(e,s=4){l(this,m,{blue:{},red:{}});l(this,y,void 0);l(this,g,4);l(this,L,n.red);l(this,T,w.arrange);l(this,f,{red:0,blue:0});l(this,v,null);C(this,"handleGridClick",e=>{const a=e.target.tagName==="IMG"?e.target.parentElement:e.target,i=a.dataset.address,o=a.parentElement.id;if(t(this,T)===w.play){const b=o==="blue"?"red":"blue",N=t(this,m)[b][i];N instanceof S&&N.destroy(),b===n.red&&t(this,f).red--,b===n.blue&&t(this,f).blue--,this.changePlayer();const O=this.whoWon();O&&(d(this,v,O),this.showWinner())}t(this,T)===w.arrange&&this.addTank(i,new S(o))});C(this,"changePlayer",()=>{d(this,L,t(this,L)===n.blue?n.red:n.blue),t(this,y).classList.toggle("blue"),t(this,L)===n.red&&(document.querySelector(".color-indicator").className=`color-indicator ${n.red}`),t(this,L)===n.blue&&(document.querySelector(".color-indicator").className=`color-indicator ${n.blue}`)});d(this,y,e),d(this,g,s),this.generateGrid(),this.renderGame()}generateGrid(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";["blue","red"].forEach(s=>{for(let a=0;a<t(this,g);a++)for(let i=0;i<t(this,g);i++)t(this,m)[s][`${e[a]}${i+1}`]={}})}renderGame(){t(this,y).innerHTML="",this.renderGrid("blue",t(this,m).blue),this.renderGrid("red",t(this,m).red),c(".grid").forEach(e=>e.addEventListener("click",this.handleGridClick))}renderGrid(e,s){let a=`<div class="grid" id="${e}">
`;for(const i in s)a+=`	<div class="grid__cell" data-address="${i}"></div>
`;a+="</div>",t(this,y).innerHTML+=a,c(".grid").forEach(i=>{i.style.gridTemplateColumns=`repeat(${t(this,g)}, 1fr)`,i.style.gridTemplateRows=`repeat(${t(this,g)}, 1fr)`})}whoWon(){return t(this,f).red===0?n.blue:t(this,f).blue===0?n.red:null}showWinner(){t(this,v)===n.blue&&new A(n.blue,"Ø¢Ø¨ÛŒ Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯!").show(),t(this,v)===n.red&&new A(n.red,"Ù‚Ø±Ù…Ø² Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯!").show(),this.freeze()}freeze(){c(".btn:not(#btn-reload)").forEach(e=>e.disabled=!0)}addTank(e,s){s.color===n.red&&t(this,f).red++,s.color===n.blue&&t(this,f).blue++,t(this,m)[s.color][e]=s,c(`#${s.color}`)[0].querySelector(`[data-address=${e}]`).append(s.cell)}set mode(e){d(this,T,e)}}m=new WeakMap,y=new WeakMap,g=new WeakMap,L=new WeakMap,T=new WeakMap,f=new WeakMap,v=new WeakMap;const I=new z(c("#ðŸŽ®")[0],5);c("#start-btn")[0].addEventListener("click",()=>{c("#ðŸ‘ž")[0].classList.add("hidden"),console.log(c("#ðŸ‘ž")[0])});c("#btn-arrange-tanks")[0].addEventListener("click",()=>I.mode=w.arrange);c("#btn-play-game")[0].addEventListener("click",()=>I.mode=w.play);c("#btn-change-player")[0].addEventListener("click",I.changePlayer);c("#btn-reload")[0].addEventListener("click",()=>window.location.reload());
